# ç­¾åé…ç½®æ›´æ–°è¯´æ˜

## âœ… å·²å®Œæˆé…ç½®

### ğŸ“‚ ç­¾åæ–‡ä»¶ä½ç½®

```
signature/
â”œâ”€â”€ takecode.p12           âœ… å¯†é’¥åº“æ–‡ä»¶
â”œâ”€â”€ takecode_release.cer   âœ… è¯ä¹¦æ–‡ä»¶
â”œâ”€â”€ takecodeRelease.p7b    âœ… Profileæ–‡ä»¶ï¼ˆå‘å¸ƒç‰ˆï¼‰
â”œâ”€â”€ takecode.csr           â„¹ï¸ è¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆå·²ä½¿ç”¨ï¼Œå¯ä¿ç•™ï¼‰
â””â”€â”€ README.md              ğŸ“– è¯´æ˜æ–‡æ¡£
```

---

## ğŸ”§ æ›´æ–°çš„é…ç½®

### build-profile.json5

```json5
{
  "app": {
    "signingConfigs": [
      {
        "name": "default",
        "type": "HarmonyOS",
        "material": {
          "storeFile": "signature/takecode.p12",           // âœ… ç›¸å¯¹è·¯å¾„
          "storePassword": "miao1234",                     // âœ… ä½ çš„å¯†ç 
          "keyAlias": "takecode",                          // âš ï¸ å¯èƒ½éœ€è¦ç¡®è®¤
          "keyPassword": "miao1234",                       // âœ… ä½ çš„å¯†ç 
          "signAlg": "SHA256withECDSA",                    // âœ… ç­¾åç®—æ³•
          "certpath": "signature/takecode_release.cer",    // âœ… è¯ä¹¦è·¯å¾„
          "profile": "signature/takecodeRelease.p7b"       // âœ… Profileè·¯å¾„
        }
      },
      {
        "name": "release",
        "type": "HarmonyOS",
        "material": {
          // ä¸ default é…ç½®ç›¸åŒ
        }
      }
    ]
  }
}
```

**å…³é”®å˜åŒ–**ï¼š
- âœ… ä»ç»å¯¹è·¯å¾„æ”¹ä¸ºç›¸å¯¹è·¯å¾„
- âœ… ä» `.ohos/config/` æ”¹ä¸º `signature/`
- âœ… ä» `debugKey` æ”¹ä¸º `takecode`
- âœ… å¯†ç æ”¹ä¸ºä½ æä¾›çš„ `miao1234`

---

## âš ï¸ éœ€è¦éªŒè¯çš„é…ç½®

### keyAlias éªŒè¯

**å½“å‰é…ç½®**ï¼š`"keyAlias": "takecode"`

è¿™æ˜¯æ ¹æ®æ–‡ä»¶åæ¨æµ‹çš„ï¼Œå¯èƒ½ä¸æ­£ç¡®ã€‚è¯·æŒ‰ä»¥ä¸‹æ–¹æ³•éªŒè¯ï¼š

#### æ–¹æ³•1ï¼šåœ¨ DevEco Studio ä¸­éªŒè¯

```
1. Build â†’ Clean Project
2. Build â†’ Build Hap(s)/App(s) â†’ Build Hap(s)
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—
```

**å¦‚æœæ„å»ºå¤±è´¥**ï¼Œé”™è¯¯ä¿¡æ¯ä¼šæ˜¾ç¤ºï¼š
```
KeyAlias {takecode} is not exist in {signature/takecode.p12}
```

#### æ–¹æ³•2ï¼šæŸ¥çœ‹å¯†é’¥åº“ï¼ˆéœ€è¦ Javaï¼‰

å¦‚æœä½ çš„ç³»ç»Ÿå®‰è£…äº† Java JDKï¼Œå¯ä»¥è¿è¡Œï¼š

```bash
# Windows PowerShell
cd F:\HarmonyOS\PickCode
$env:JAVA_HOME\bin\keytool -list -v -keystore signature\takecode.p12 -storepass miao1234

# æŸ¥çœ‹è¾“å‡ºä¸­çš„ "åˆ«ååç§°:" æˆ– "Alias name:"
```

#### æ–¹æ³•3ï¼šå¸¸è§çš„åˆ«å

å¦‚æœ `takecode` ä¸å¯¹ï¼Œå°è¯•è¿™äº›å¸¸è§åˆ«åï¼š
- `key0`
- `release`
- `takecode_key`
- `default`

---

## ğŸš€ æ„å»ºå’Œæµ‹è¯•

### æ­¥éª¤1ï¼šæ¸…ç†æ—§æ„å»º

```
DevEco Studio:
Build â†’ Clean Project
```

### æ­¥éª¤2ï¼šé‡æ–°æ„å»º

```
Build â†’ Build Hap(s)/App(s) â†’ Build App(s)
```

### æ­¥éª¤3ï¼šæ£€æŸ¥è¾“å‡º

**æˆåŠŸæ ‡å¿—**ï¼š
```
entry/build/default/outputs/default/
â””â”€â”€ entry-default-signed.hap  âœ… ç­¾åæˆåŠŸ
```

**å¤±è´¥æ ‡å¿—**ï¼š
```
ERROR: KeyAlias {xxx} is not exist
â†’ éœ€è¦ä¿®æ”¹ keyAlias
```

---

## ğŸ”§ å¦‚æœæ„å»ºå¤±è´¥

### é”™è¯¯1ï¼šKeyAlias ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
KeyAlias {takecode} is not exist in {signature/takecode.p12}
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ‰“å¼€ `build-profile.json5`
2. ä¿®æ”¹ `keyAlias` çš„å€¼
3. å°è¯•å…¶ä»–å¸¸è§åˆ«åï¼š`key0`, `release`, `default`
4. é‡æ–°æ„å»º

**ä¿®æ”¹ç¤ºä¾‹**ï¼š
```json5
"keyAlias": "key0",  // ä» "takecode" æ”¹ä¸º "key0"
```

### é”™è¯¯2ï¼šå¯†ç é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Keystore was tampered with, or password was incorrect
```

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®è®¤å¯†ç æ˜¯å¦æ­£ç¡®
- å¯†ç å¯èƒ½ä¸æ˜¯ `miao1234`
- è”ç³»ç”Ÿæˆå¯†é’¥åº“çš„äººç¡®è®¤å¯†ç 

### é”™è¯¯3ï¼šProfile æ–‡ä»¶éæ³•

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Profile file is invalid
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ Profile æ–‡ä»¶æ˜¯å¦æ˜¯**å‘å¸ƒç±»å‹**
2. æ£€æŸ¥ Profile ä¸­çš„ Bundle ID æ˜¯å¦ä¸º `com.mtx.take.code`
3. æ£€æŸ¥ Profile æ˜¯å¦è¿‡æœŸ
4. é‡æ–°ä»åä¸ºå¼€å‘è€…åå°ä¸‹è½½ Profile

---

## ğŸ“Š é…ç½®å¯¹æ¯”

| é…ç½®é¡¹ | æ›´æ–°å‰ | æ›´æ–°å |
|--------|--------|--------|
| **è·¯å¾„ç±»å‹** | ç»å¯¹è·¯å¾„ | ç›¸å¯¹è·¯å¾„ âœ… |
| **æ–‡ä»¶ä½ç½®** | `.ohos/config/` | `signature/` âœ… |
| **keyAlias** | `debugKey` | `takecode` âš ï¸ |
| **ç­¾åç±»å‹** | è°ƒè¯•ç­¾å | æ­£å¼ç­¾å âœ… |
| **å¯†ç ** | è‡ªåŠ¨ç”Ÿæˆ | `miao1234` âœ… |

---

## ğŸ“ åç»­æ­¥éª¤

### 1. éªŒè¯æ„å»º
```bash
Build â†’ Build App(s)
```

### 2. æ£€æŸ¥ç­¾å
```bash
# æŸ¥çœ‹ç”Ÿæˆçš„ HAP åŒ…
entry/build/default/outputs/default/entry-default-signed.hap
```

### 3. ä¸Šä¼ æµ‹è¯•
```
AppGallery Connect â†’ æˆ‘çš„åº”ç”¨ â†’ PickCode
â†’ ç‰ˆæœ¬ä¿¡æ¯ â†’ ä¸Šä¼  HAP åŒ…
â†’ æµ‹è¯•æ˜¯å¦è¿˜æœ‰é”™è¯¯ç  993
```

---

## âœ… é¢„æœŸç»“æœ

å¦‚æœ keyAlias æ­£ç¡®ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

```
âœ“ æ„å»ºæˆåŠŸ
âœ“ ç”Ÿæˆ entry-default-signed.hap
âœ“ ä¸Šä¼  AppGallery æˆåŠŸ
âœ“ é”™è¯¯ç  993 æ¶ˆå¤±
```

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¦‚æœ keyAlias ä¸ç¡®å®š

è¯·å‘Šè¯‰æˆ‘æ„å»ºçš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šå¸®ä½ è°ƒæ•´ã€‚

### å¦‚æœå¯†ç ä¸å¯¹

è¯·æä¾›æ­£ç¡®çš„å¯†ç ï¼Œæˆ‘ä¼šæ›´æ–°é…ç½®ã€‚

### å¦‚æœè¿˜æœ‰å…¶ä»–é”™è¯¯

è¯·æä¾›å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šå¸®ä½ åˆ†æã€‚

---

## ğŸ“‹ é…ç½®æ–‡ä»¶å¤‡ä»½

**åŸé…ç½®å·²ä¿ç•™åœ¨ Git å†å²ä¸­**ï¼Œå¦‚éœ€æ¢å¤ï¼š
```bash
git checkout HEAD~1 -- build-profile.json5
```

---

**æ›´æ–°æ—¶é—´**ï¼š2025-10-25  
**çŠ¶æ€**ï¼šâœ… é…ç½®å·²æ›´æ–°ï¼Œå¾…éªŒè¯ keyAlias

