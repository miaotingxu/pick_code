# 快递取件码管理 APP

一款基于 HarmonyOS 开发的快递取件码管理应用，帮助用户集中管理所有快递取件码。

## 功能特性

### 核心功能

- ✅ **取件码管理**
  - 待取/已取状态分类管理
  - 按日期自动分组展示
  - 一键切换取件状态

- ✅ **多种添加方式**
  - 手动输入取件码信息
  - 扫描快递单二维码/条形码
  - 自动读取短信中的取件码（支持权限申请）

- ✅ **智能识别**
  - 自动识别主流快递公司（圆通、中通、极兔、京东等）
  - 提取驿站名称和地址信息
  - 正则匹配多种取件码格式

- ✅ **便捷操作**
  - 长按取件码一键复制
  - 按快递公司筛选
  - 批量删除功能

- ✅ **数据存储**
  - 本地关系型数据库存储
  - 预留云端同步接口

## 技术架构

### 开发语言
- ArkTS (HarmonyOS 应用开发语言)

### 核心技术
- **数据库**: RelationalStore (关系型数据库)
- **UI框架**: ArkUI (声明式UI)
- **扫码**: scanBarcode API
- **权限管理**: abilityAccessCtrl
- **剪贴板**: pasteboard

### 项目结构

```
entry/src/main/ets/
├── common/
│   └── Constants.ets          # 常量配置
├── database/
│   └── ParcelDatabase.ets     # 数据库管理
├── model/
│   └── ParcelModel.ets        # 数据模型
├── pages/
│   ├── Index.ets              # 主页面
│   └── AddParcel.ets          # 添加页面
├── service/
│   ├── SmsService.ets         # 短信读取服务
│   └── ScanService.ets        # 扫码服务
└── utils/
    └── IconUtils.ets          # 图标工具类
```

## 数据模型

### ParcelModel (包裹模型)

| 字段 | 类型 | 说明 |
|------|------|------|
| id | number | 主键（自增） |
| pickupCode | string | 取件码 |
| courierCompany | string | 快递公司 |
| stationName | string | 驿站名称 |
| address | string | 详细地址 |
| pickupTime | string | 取件时间 |
| status | number | 状态（0-待取，1-已取） |
| createTime | number | 创建时间戳 |
| isDeleted | number | 删除标记 |
| syncStatus | number | 同步状态（预留） |

## 支持的快递公司

- 圆通速递 (YTO)
- 中通快递 (ZTO)
- 极兔速递 (J&T)
- 京东快递 (JD)
- 韵达快递
- 菜鸟驿站
- 妈妈驿站
- 免喜生活
- 顺丰速运 (SF)
- 申通快递 (STO)
- 邮政快递 (EMS)

## 权限说明

应用需要以下权限：

- `ohos.permission.READ_MESSAGES` - 读取短信权限
  - 用途：自动提取短信中的快递取件码信息
  - 使用场景：应用前台运行时

- `ohos.permission.CAMERA` - 相机权限
  - 用途：扫描快递单上的条形码和二维码
  - 使用场景：点击扫码按钮时

## 使用说明

### 1. 查看取件码

- 主界面分为"待取"和"已取"两个标签页
- 取件码按日期分组展示
- 点击圆圈图标可切换取件状态

### 2. 添加取件码

**方式一：手动添加**
1. 点击右上角"+"按钮
2. 填写快递公司、驿站名称、取件码等信息
3. 点击"保存"

**方式二：扫码添加** ⭐ 推荐
1. 点击右上角扫码按钮（⊞ 图标）
2. 将相机对准快递单上的二维码或条形码
3. 系统自动识别物流单号和快递公司
4. 自动提取驿站名称和地址（如果有）
5. 一键保存到待取列表

扫码功能特点：
- 支持所有标准条形码和二维码格式
- 智能识别 15+ 主流快递公司
- 自动提取取件码、驿站、地址信息
- 支持从相册选择图片识别
- 详细说明见 [扫码功能说明](docs/扫码功能说明.md)

**方式三：自动读取短信**
- 首次使用需授予短信读取权限
- 系统自动提取短信中的取件码信息

### 3. 复制取件码

长按取件码区域，系统会自动复制取件码到剪贴板

### 4. 筛选功能

在"待取"页面，可以按以下条件筛选：
- 按时间（默认）
- 按快递公司（免喜、妈妈、韵达等）

### 5. 删除记录

在"已取"页面：
1. 点击右上角删除按钮进入编辑模式
2. 选择要删除的记录
3. 确认删除

## 开发计划

### 已完成功能 ✅
- [x] 数据模型和数据库设计
- [x] 主页面 UI（严格按照设计图）
- [x] 手动添加功能
- [x] 扫码功能
- [x] 短信读取服务
- [x] 状态管理（待取/已取）
- [x] 筛选功能
- [x] 复制功能
- [x] 删除功能

### 待优化功能 📋
- [ ] 快递公司真实 Logo 图标
- [ ] 短信自动监听（需要系统级权限）
- [ ] 云端同步功能
- [ ] 取件提醒通知
- [ ] 深色模式适配
- [ ] 数据导出/导入
- [ ] 统计分析功能

## UI 设计

应用 UI 严格遵循提供的设计图：

### 颜色规范
- 主题色：黑色 (#000000)
- 强调色：蓝色 (#007AFF)
- 背景色：浅灰 (#F5F5F5)
- 卡片背景：白色 (#FFFFFF)
- 次要文字：灰色 (#999999)

### 布局特点
- 卡片式设计，圆角 16px
- 快递公司彩色圆形图标
- 取件码大号字体显示
- 清晰的视觉层次

## 注意事项

1. **图标资源**
   - 当前使用文字图标作为占位符
   - 建议添加各快递公司的真实 Logo 到 `entry/src/main/resources/base/media/`

2. **短信权限**
   - 短信读取功能需要用户授权
   - 鸿蒙系统对短信监听有一定限制

3. **数据安全**
   - 所有数据存储在本地加密数据库
   - 预留云端同步接口，需要后续实现

## 运行环境

- HarmonyOS SDK API 9+
- DevEco Studio 4.0+
- 支持手机和平板设备

## 构建运行

1. 使用 DevEco Studio 打开项目
2. 连接 HarmonyOS 设备或启动模拟器
3. 点击运行按钮进行编译和安装

## 贡献

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License

---

**开发完成时间**: 2025-10-22
**开发者**: AI Assistant
**版本**: 1.0.0

