# åº”ç”¨ç­¾åé…ç½®æ“ä½œæŒ‡å—

> **åŒ…å**: `com.mtx.take.code`  
> **å¯†ç **: `miao1234`  
> **åˆ›å»ºæ—¶é—´**: 2025-10-24

---

## ğŸ¯ æ¨èæ–¹æ¡ˆï¼šä½¿ç”¨ DevEco Studio è‡ªåŠ¨ç­¾åï¼ˆæœ€ç®€å•ï¼‰â­

### æ­¥éª¤ 1: æ‰“å¼€ç­¾åé…ç½®

1. åœ¨ DevEco Studio ä¸­æ‰“å¼€é¡¹ç›®
2. ç‚¹å‡»èœå•æ  **File** â†’ **Project Structure**
3. æˆ–æŒ‰å¿«æ·é”® **Ctrl + Alt + Shift + S**

---

### æ­¥éª¤ 2: é…ç½®è‡ªåŠ¨ç­¾å

1. åœ¨å·¦ä¾§é€‰æ‹© **Project** â†’ **Signing Configs**

2. å‹¾é€‰ âœ… **Automatically generate signature**

3. é€‰æ‹© **Support HarmonyOS**

4. ç‚¹å‡» **Apply** â†’ **OK**

**å®Œæˆï¼** DevEco Studio ä¼šè‡ªåŠ¨ï¼š
- âœ… ç”Ÿæˆè°ƒè¯•ç­¾åæ–‡ä»¶
- âœ… é…ç½®ç­¾åä¿¡æ¯
- âœ… ä¿å­˜åˆ°å®‰å…¨ä½ç½®
- âœ… æ¯æ¬¡æ„å»ºæ—¶è‡ªåŠ¨ç­¾å

---

## ğŸ”§ æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨ç”Ÿæˆç­¾åæ–‡ä»¶

å¦‚æœéœ€è¦æ‰‹åŠ¨é…ç½®ç­¾åï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### æ­¥éª¤ 1: ç”Ÿæˆå¯†é’¥å¯¹ (.p12 æ–‡ä»¶)

**åœ¨ DevEco Studio ä¸­ç”Ÿæˆï¼ˆæ¨èï¼‰ï¼š**

1. ç‚¹å‡»èœå• **Build** â†’ **Generate Key and CSR**

2. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   ```
   Key Alias:     pickcode_key
   Password:      miao1234
   Confirm:       miao1234
   Validity:      25 (å¹´)
   ```

3. å¡«å†™è¯ä¹¦ä¿¡æ¯ï¼š
   ```
   Organization:         MTX
   Organization Unit:    Development
   City/Locality:        Beijing
   State/Province:       Beijing
   Country Code:         CN
   ```

4. é€‰æ‹©ä¿å­˜ä½ç½®ï¼š
   ```
   F:\HarmonyOS\PickCode\signature\pickcode.p12
   ```

5. ç‚¹å‡» **OK** ç”Ÿæˆ

---

### æ­¥éª¤ 2: ç”³è¯·è°ƒè¯•è¯ä¹¦

**å¯¹äºå¼€å‘æµ‹è¯•ï¼š**

1. **File** â†’ **Project Structure** â†’ **Signing Configs**

2. **å‹¾é€‰ Support HarmonyOS**

3. **é…ç½®ç­¾åä¿¡æ¯**ï¼š
   ```
   Store File:      signature/pickcode.p12
   Store Password:  miao1234
   Key Alias:       pickcode_key
   Key Password:    miao1234
   ```

4. ç‚¹å‡» **Apply** â†’ **OK**

**DevEco Studio ä¼šè‡ªåŠ¨ç”Ÿæˆè°ƒè¯•è¯ä¹¦ï¼ˆ.cerï¼‰å’Œé…ç½®æ–‡ä»¶ï¼ˆ.p7bï¼‰**

---

### æ­¥éª¤ 3: ä¿®æ”¹ build-profile.json5

å¦‚æœéœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `build-profile.json5`ï¼š

```json5
{
  "app": {
    "signingConfigs": [
      {
        "name": "default",
        "type": "HarmonyOS",
        "material": {
          "storeFile": "signature/pickcode.p12",
          "storePassword": "miao1234",
          "keyAlias": "pickcode_key",
          "keyPassword": "miao1234",
          "signAlg": "SHA256withRSA",
          "certpath": "signature/pickcode.cer",
          "profile": "signature/pickcode.p7b"
        }
      }
    ],
    "products": [
      {
        "name": "default",
        "signingConfig": "default",
        "targetSdkVersion": "6.0.0(20)",
        "compatibleSdkVersion": "6.0.0(20)",
        "runtimeOS": "HarmonyOS"
      }
    ]
  }
}
```

---

## ğŸ› ï¸ æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨å‘½ä»¤è¡Œç”Ÿæˆç­¾åæ–‡ä»¶

å¦‚æœä½ æƒ³ç”¨å‘½ä»¤è¡Œç”Ÿæˆï¼Œéœ€è¦å…ˆæ‰¾åˆ° keytoolï¼š

### æŸ¥æ‰¾ keytool

```powershell
# æ–¹æ³• 1: æŸ¥æ‰¾ Java keytool
where.exe keytool

# æ–¹æ³• 2: æŸ¥æ‰¾ HarmonyOS SDK ä¸­çš„ keytool
Get-ChildItem "$env:LOCALAPPDATA\Huawei\Sdk" -Recurse -Filter "keytool*"
```

### ç”Ÿæˆå¯†é’¥åº“

æ‰¾åˆ° keytool åï¼Œæ‰§è¡Œï¼š

```powershell
keytool -genkeypair `
  -keystore signature\pickcode.p12 `
  -storetype PKCS12 `
  -keyalg RSA `
  -keysize 2048 `
  -validity 9125 `
  -alias pickcode_key `
  -storepass miao1234 `
  -keypass miao1234 `
  -dname "CN=MTX PickCode,OU=Development,O=MTX,L=Beijing,ST=Beijing,C=CN"
```

### éªŒè¯ç”Ÿæˆçš„å¯†é’¥

```powershell
keytool -list -v `
  -keystore signature\pickcode.p12 `
  -storepass miao1234
```

---

## ğŸ“‹ ç­¾åé…ç½®å‚æ•°è¯´æ˜

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| **Store File** | `signature/pickcode.p12` | å¯†é’¥åº“æ–‡ä»¶è·¯å¾„ |
| **Store Password** | `miao1234` | å¯†é’¥åº“å¯†ç  |
| **Key Alias** | `pickcode_key` | å¯†é’¥åˆ«å |
| **Key Password** | `miao1234` | å¯†é’¥å¯†ç  |
| **Sign Algorithm** | `SHA256withRSA` | ç­¾åç®—æ³• |
| **Validity** | `25 years` | æœ‰æ•ˆæœŸ |
| **Organization** | `MTX` | ç»„ç»‡åç§° |

---

## ğŸ” éªŒè¯ç­¾åé…ç½®

### æ£€æŸ¥ç­¾åæ–‡ä»¶

```powershell
# æŸ¥çœ‹ signature ç›®å½•
Get-ChildItem signature\

# åº”è¯¥çœ‹åˆ°ï¼š
# pickcode.p12 (å¿…é¡»)
# pickcode.cer (è‡ªåŠ¨ç”Ÿæˆ)
# pickcode.p7b (è‡ªåŠ¨ç”Ÿæˆ)
```

### æ„å»ºå¹¶æµ‹è¯•

```
1. Build â†’ Clean Project
2. Build â†’ Rebuild Project
3. Run â†’ Run 'entry' (Shift + F10)
```

å¦‚æœæ„å»ºæˆåŠŸå¹¶èƒ½å®‰è£…åˆ°è®¾å¤‡ï¼Œè¯´æ˜ç­¾åé…ç½®æ­£ç¡®ï¼

---

## âš ï¸ é‡è¦æç¤º

### 1. ç­¾åæ–‡ä»¶å®‰å…¨

**å·²åœ¨ .gitignore ä¸­æ’é™¤ç­¾åæ–‡ä»¶ï¼š**

```gitignore
# Signing files (IMPORTANT: Keep these private!)
signature/*.p12
signature/*.cer
signature/*.p7b
signature/*.jks
*.keystore
*.p12
*.csr
material/
```

**è¯·å‹¿å°†ä»¥ä¸‹æ–‡ä»¶æäº¤åˆ° Gitï¼š**
- âŒ `pickcode.p12` (ç§é’¥)
- âŒ ä»»ä½•åŒ…å«å¯†ç çš„é…ç½®æ–‡ä»¶

---

### 2. å¯†ç ç®¡ç†

**å½“å‰å¯†ç **: `miao1234`

**å»ºè®®**ï¼š
- âœ… ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç 
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶
- âœ… å‘å¸ƒç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„å¯†ç 

---

### 3. ç­¾åç±»å‹

| ç±»å‹ | ç”¨é€” | ç”Ÿæˆæ–¹å¼ |
|------|------|----------|
| **è°ƒè¯•ç­¾å** | å¼€å‘æµ‹è¯• | DevEco Studio è‡ªåŠ¨ç”Ÿæˆ |
| **å‘å¸ƒç­¾å** | æ­£å¼å‘å¸ƒ | æ‰‹åŠ¨ç”³è¯· + é…ç½® |

**å¯¹äºå½“å‰å¼€å‘é˜¶æ®µ**ï¼šä½¿ç”¨è°ƒè¯•ç­¾åå³å¯

---

## ğŸš€ å¿«é€Ÿé…ç½®æµç¨‹

### æœ€ç®€å•çš„é…ç½®ï¼ˆæ¨èï¼‰

```
1. æ‰“å¼€ DevEco Studio
   â†“
2. File â†’ Project Structure
   â†“
3. Signing Configs â†’ âœ… Automatically generate signature
   â†“
4. Apply â†’ OK
   â†“
5. Build â†’ Rebuild Project
   â†“
6. âœ… å®Œæˆï¼
```

**ç”¨æ—¶**ï¼šä¸åˆ° 1 åˆ†é’Ÿ

---

## ğŸ¯ ç­¾åé…ç½®åçš„æ“ä½œ

### 1. é‡æ–°æ„å»º

```
Build â†’ Clean Project
Build â†’ Rebuild Project
```

### 2. å®‰è£…åˆ°è®¾å¤‡

```
Run â†’ Run 'entry' (Shift + F10)
```

### 3. éªŒè¯ç­¾å

```powershell
# æŸ¥çœ‹ HAP åŒ…ä¿¡æ¯
hdc shell bm dump -n com.mtx.take.code
```

---

## ğŸ“ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: "ç­¾åå¤±è´¥"

**å¯èƒ½åŸå› **ï¼š
- å¯†ç é”™è¯¯
- ç­¾åæ–‡ä»¶è·¯å¾„ä¸å¯¹
- è¯ä¹¦è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®ï¼š`miao1234`
2. æ£€æŸ¥ `signature/pickcode.p12` æ˜¯å¦å­˜åœ¨
3. é‡æ–°ç”Ÿæˆç­¾åæ–‡ä»¶

---

### é—®é¢˜ 2: "æ‰¾ä¸åˆ°ç­¾åé…ç½®"

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥ `build-profile.json5` ä¸­çš„ `signingConfigs`
2. ç¡®ä¿ `products` ä¸­é…ç½®äº† `signingConfig: "default"`
3. é‡æ–°åŒæ­¥é¡¹ç›®

---

### é—®é¢˜ 3: è‡ªåŠ¨ç­¾åä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š

```
1. File â†’ Invalidate Caches / Restart
2. File â†’ Project Structure â†’ Signing Configs
3. é‡æ–°å‹¾é€‰ "Automatically generate signature"
4. Apply â†’ OK
5. Build â†’ Rebuild Project
```

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] å·²åœ¨ DevEco Studio ä¸­æ‰“å¼€é¡¹ç›®
- [ ] å·²é…ç½®è‡ªåŠ¨ç­¾åæˆ–æ‰‹åŠ¨ç­¾å
- [ ] ç­¾åæ–‡ä»¶å·²ç”Ÿæˆï¼ˆå¦‚æœæ‰‹åŠ¨é…ç½®ï¼‰
- [ ] build-profile.json5 å·²é…ç½®ï¼ˆå¦‚æœæ‰‹åŠ¨é…ç½®ï¼‰
- [ ] å·²é‡æ–°æ„å»ºé¡¹ç›®
- [ ] åº”ç”¨èƒ½æˆåŠŸå®‰è£…åˆ°è®¾å¤‡
- [ ] åº”ç”¨èƒ½æ­£å¸¸è¿è¡Œ
- [ ] ç­¾åæ–‡ä»¶å·²æ·»åŠ åˆ° .gitignore

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- ğŸ“„ `docs/ç­¾åé…ç½®æŒ‡å—.md` - æ›´è¯¦ç»†çš„ç­¾åè¯´æ˜
- ğŸ“„ `å¯åŠ¨é”™è¯¯ä¿®å¤æŒ‡å—.md` - å®‰è£…é—®é¢˜æ’æŸ¥
- ğŸ“„ `æ‰“åŒ…å®‰è£…è¯´æ˜.md` - å®Œæ•´çš„æ‰“åŒ…æµç¨‹
- ğŸ“„ [HarmonyOS å®˜æ–¹æ–‡æ¡£](https://developer.harmonyos.com/)

---

## ğŸ‰ æ¨èæ“ä½œ

**æœ€å¿«é€Ÿçš„é…ç½®æ–¹å¼**ï¼š

1. æ‰“å¼€ DevEco Studio
2. File â†’ Project Structure â†’ Signing Configs
3. âœ… Automatically generate signature
4. Apply â†’ OK
5. Shift + F10 è¿è¡Œ

**å®Œæˆï¼** DevEco Studio ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰ç­¾åç›¸å…³çš„äº‹æƒ…ã€‚

---

**å½“å‰å¯†ç **: `miao1234`  
**åŒ…å**: `com.mtx.take.code`  
**æ¨èæ–¹å¼**: è‡ªåŠ¨ç­¾å â­

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-10-24  
**çŠ¶æ€**: âœ… å¯ç”¨

